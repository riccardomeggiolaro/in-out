#!/bin/bash
# Esempio di file di configurazione per sync_folder.sh
# Copia questo file, adattalo alle tue esigenze e usa:
#   source config.env
#   $HOME/.local/bin/sync_folder.sh "$CARTELLA_LOCALE" "$CARTELLA_RETE"

# ============ CARTELLE ============
# Cartella locale da sincronizzare
CARTELLA_LOCALE="$HOME/sync_local"

# Cartella di rete (mount point)
# Esempi:
#   /mnt/rete/sync
#   /mnt/windows_share
#   /mnt/nas/backup
CARTELLA_RETE="/mnt/rete/sync"

# ============ PARAMETRI DI SINCRONIZZAZIONE ============
# Intervallo di controllo della connessione (secondi)
# Valori consigliati: 5 (reattivo), 10 (equilibrato), 30 (risparmio risorse)
INTERVALLO_CONTROLLO=5

# Numero massimo di tentativi di sincronizzazione prima di rinviare
# Valori consigliati: 3 (predefinito), 5 (rete instabile), 1 (veloce ma meno robusto)
MAX_RETRY=3

# ============ LOG E DATABASE ============
# Percorso del file di log (usa cartelle persistenti, non /tmp se vuoi conservare i log)
LOG_FILE="/tmp/sync_monitor.log"

# Percorso del database di stato (traccia i file sincronizzati)
# Se non persistente, la sincronizzazione ripeter√† i file al riavvio
STATE_FILE="/tmp/sync_state.db"

# ============ MONTAGGIO AUTOMATICO (opzionale) ============
# Se la cartella di rete potrebbe non essere montata, decommentare:

# mount_network_share() {
#     if ! mount | grep -q "$CARTELLA_RETE"; then
#         echo "Montaggio cartella di rete..."
#         sudo mount -t cifs //192.168.1.100/condivisione "$CARTELLA_RETE" \
#             -o username=utente,password=password
#     fi
# }

# Chiama prima di sincronizzare:
# mount_network_share

# ============ FILTRI (AVANZATO) ============
# Estensioni di file da escludere (decommentare se necessario)
# EXCLUDE_PATTERNS=(
#     "*.tmp"
#     "*.lock"
#     ".*"
#     "node_modules"
#     "__pycache__"
# )
